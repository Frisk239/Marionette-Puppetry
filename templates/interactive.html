{% extends "base.html" %}

{% block title %}虚拟戏台 - 在线木偶互动体验{% endblock %}

{% block content %}
<div class="interactive-container">
    <h1 class="page-title">虚拟戏台</h1>
    <p class="page-subtitle">亲手操控传统木偶，体验千年技艺的魅力</p>
    
    <div class="interactive-area">
        <div class="puppet-stage">
            <div class="stage-background">
                <div class="stage-curtain"></div>
                <div class="stage-floor"></div>
            </div>
            
            <div class="puppet-container">
                <svg class="puppet-svg" viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg">
                    <!-- 木偶身体 -->
                    <g class="puppet-body">
                        <!-- 头部 -->
                        <circle class="puppet-part head" cx="100" cy="50" r="20" fill="#fdbcb4" stroke="#8b4513" stroke-width="2"/>
                        <!-- 身体 -->
                        <rect class="puppet-part body" x="80" y="70" width="40" height="60" fill="#dc143c" rx="5"/>
                        <!-- 左臂 -->
                        <line class="puppet-part left-arm" x1="80" y1="85" x2="60" y2="110" stroke="#fdbcb4" stroke-width="8" stroke-linecap="round"/>
                        <!-- 右臂 -->
                        <line class="puppet-part right-arm" x1="120" y1="85" x2="140" y2="110" stroke="#fdbcb4" stroke-width="8" stroke-linecap="round"/>
                        <!-- 左腿 -->
                        <line class="puppet-part left-leg" x1="90" y1="130" x2="85" y2="160" stroke="#fdbcb4" stroke-width="8" stroke-linecap="round"/>
                        <!-- 右腿 -->
                        <line class="puppet-part right-leg" x1="110" y1="130" x2="115" y2="160" stroke="#fdbcb4" stroke-width="8" stroke-linecap="round"/>
                        <!-- 帽子 -->
                        <ellipse class="puppet-part hat" cx="100" cy="40" rx="25" ry="10" fill="#8b4513"/>
                    </g>
                </svg>
            </div>
            
            <div class="control-strings">
                <div class="string string-head"></div>
                <div class="string string-left"></div>
                <div class="string string-right"></div>
            </div>
        </div>
        
        <div class="control-panel">
            <h3>木偶控制台</h3>
            
            <div class="action-buttons">
                <h4>预设动作</h4>
                <div class="action-grid" id="actionButtons">
                    <!-- 动态加载动作按钮 -->
                </div>
            </div>
            
            <div class="manual-controls">
                <h4>手动控制</h4>
                <div class="control-group">
                    <label>头部旋转: <span id="headValue">0°</span></label>
                    <input type="range" id="headControl" min="-45" max="45" value="0" class="control-slider">
                </div>
                
                <div class="control-group">
                    <label>左臂角度: <span id="leftArmValue">0°</span></label>
                    <input type="range" id="leftArmControl" min="-90" max="90" value="0" class="control-slider">
                </div>
                
                <div class="control-group">
                    <label>右臂角度: <span id="rightArmValue">0°</span></label>
                    <input type="range" id="rightArmControl" min="-90" max="90" value="0" class="control-slider">
                </div>
                
                <div class="control-group">
                    <label>左腿角度: <span id="leftLegValue">0°</span></label>
                    <input type="range" id="leftLegControl" min="-45" max="45" value="0" class="control-slider">
                </div>
                
                <div class="control-group">
                    <label>右腿角度: <span id="rightLegValue">0°</span></label>
                    <input type="range" id="rightLegControl" min="-45" max="45" value="0" class="control-slider">
                </div>
            </div>
            
            <div class="story-generator">
                <h4>AI故事创作</h4>
                <input type="text" id="storyTheme" placeholder="输入故事主题..." class="story-input">
                <input type="text" id="storyCharacters" placeholder="主要角色..." class="story-input">
                <button onclick="generateStory()" class="btn btn-primary">生成故事</button>
                <div id="generatedStory" class="story-result"></div>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        <h3>操作说明</h3>
        <ul>
            <li>点击预设动作按钮，观看木偶自动表演</li>
            <li>使用滑块手动控制木偶的各个关节</li>
            <li>输入主题和角色，让AI为您创作木偶戏剧本</li>
            <li>尝试组合不同动作，创造独特的表演</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/puppet-control.js') }}"></script>
{% endblock %}
